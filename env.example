# Magento 2.4.x Docker Environment Variables
# Copy this file to .env and fill in your values
# Coolify will automatically generate magic environment variables

# Application Settings
MAGENTO_VERSION=2.4.7
MAGENTO_MODE=production
MAGENTO_ADMIN_USER=admin
MAGENTO_ADMIN_PASSWORD=${SERVICE_PASSWORD_MAGENTO}
MAGENTO_ADMIN_EMAIL=admin@${SERVICE_FQDN_MAGENTO}
MAGENTO_ADMIN_FIRSTNAME=Admin
MAGENTO_ADMIN_LASTNAME=User

# Domain Configuration - Using Coolify's magic FQDN variables
MAGENTO_BASE_URL=${SERVICE_URL_MAGENTO}
MAGENTO_SECURE_BASE_URL=${SERVICE_URL_MAGENTO}
MAGENTO_BACKEND_NAME=admin

# Service Subdomains using magic variables
ADMIN_SUBDOMAIN=${SERVICE_FQDN_ADMIN}
API_SUBDOMAIN=${SERVICE_FQDN_API}
MEDIA_SUBDOMAIN=${SERVICE_FQDN_MEDIA}
STATIC_SUBDOMAIN=${SERVICE_FQDN_STATIC}

# Development Environment (if needed)
DEV_DOMAIN=${SERVICE_FQDN_DEV}
STAGING_DOMAIN=${SERVICE_FQDN_STAGING}

# Database Configuration
MYSQL_ROOT_PASSWORD=${SERVICE_PASSWORD_MYSQL}
MYSQL_DATABASE=magento
MYSQL_USER=magento
MYSQL_PASSWORD=${SERVICE_PASSWORD_MYSQL}
MYSQL_HOST=mariadb
MYSQL_PORT=3306

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${SERVICE_PASSWORD_REDIS}

# RabbitMQ Configuration
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=${SERVICE_PASSWORD_RABBITMQ}
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_MANAGEMENT_URL=${SERVICE_URL_RABBITMQ_MGMT}

# OpenSearch Configuration
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=${SERVICE_PASSWORD_OPENSEARCH}
OPENSEARCH_URL=${SERVICE_URL_OPENSEARCH}

# Varnish Configuration
VARNISH_HOST=varnish
VARNISH_PORT=80
VARNISH_BACKEND_HOST=nginx
VARNISH_BACKEND_PORT=80

# Mail Configuration
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_ENCRYPTION=none
MAILHOG_URL=${SERVICE_URL_MAILHOG}

# Composer Configuration
COMPOSER_AUTH_USERNAME=
COMPOSER_AUTH_PASSWORD=

# PHP Configuration
PHP_MEMORY_LIMIT=2G
PHP_MAX_EXECUTION_TIME=1800
PHP_UPLOAD_MAX_FILESIZE=64M
PHP_POST_MAX_SIZE=64M

# Xdebug Configuration (Development only)
XDEBUG_ENABLED=false
XDEBUG_HOST=host.docker.internal
XDEBUG_PORT=9003

# Volume Paths
MYSQL_DATA_PATH=./volumes/mysql
OPENSEARCH_DATA_PATH=./volumes/opensearch
MAGENTO_MEDIA_PATH=./volumes/magento/media
MAGENTO_VAR_PATH=./volumes/magento/var

# Resource Limits
NGINX_MEMORY_LIMIT=256M
PHP_MEMORY_LIMIT_CONTAINER=1G
MARIADB_MEMORY_LIMIT=1G
OPENSEARCH_MEMORY_LIMIT=2G
REDIS_MEMORY_LIMIT=256M
RABBITMQ_MEMORY_LIMIT=512M
VARNISH_MEMORY_LIMIT=512M

# Security
MAGENTO_ENCRYPTION_KEY=${SERVICE_BASE64_MAGENTO}
MAGENTO_CRON_EXPRESSION="*/60 * * * *"
QUEUE_CONSUMER_MAX_MESSAGES=1000

# SSL/TLS Configuration
# Note: SSL is managed by Coolify's Traefik, no manual configuration needed

# Coolify Magic Variables Reference:
# SERVICE_FQDN_MAGENTO - Main application FQDN (e.g., m2-vgsco4o.dev.fitchs.au)
# SERVICE_URL_MAGENTO - Full URL with protocol (e.g., https://m2-vgsco4o.dev.fitchs.au)
# SERVICE_PASSWORD_MAGENTO - Auto-generated secure password
# SERVICE_BASE64_MAGENTO - Auto-generated base64 string for encryption keys
# SERVICE_FQDN_ADMIN - Admin subdomain FQDN
# SERVICE_FQDN_API - API subdomain FQDN
# SERVICE_FQDN_MEDIA - Media subdomain FQDN
# SERVICE_FQDN_STATIC - Static assets subdomain FQDN
